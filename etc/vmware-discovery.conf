# This file contains configuration properties that affects how the VMware discovery driver functions.
# Most properties have default values based on a default configuration, but some items such as credentials
# and connection information should be set.

[DEFAULT]
# The following group of properties needs to be configured
# in order for the VMware discovery driver to be able to authenticate with keystone
# and obtain information from it, that might be required to run background
# tasks (such as discovering a new image), or simply to connect to a 
# secured Glance.
# When running secured Glance, make sure the 'auth_strategy' property in 
# nova.conf is set to 'keystone'.

# Log info messages
debug = true
log_file=/var/log/vmware-discovery.log
#host=
use_neutron=true


[openstack]
# Authentication url to authenticate with keystone (string value)
# default valume is 'http://localhost:5000/v2.0/'
#auth_url=http://172.16.142.131:5000/v3
auth_url=http://172.16.142.131:5000/v2.0/

# Username for connecting to keystone in admin context (string value)
admin_user=admin

# Password for connecting to keystone in admin context (string value)
admin_password=teamsun

# Tenant name for connecting to keystone in admin context (string value)
admin_tenant_name=admin

# For local SSL connections, specify the path and filename of the cacert file
# default value is None
# connection_cacert = None

# Allow to perform insecure SSL (https) requests to glance (boolean value)
# default value is False
http_insecure=True

# v2.0 or v3, default v3
keystone_version = v2.0


[discovery_common]
# Full class name for the manager for VMware Discovery Service (string value)
# default valume is vmware_discovery.discovery_manager.VMwareDiscoveryManager
discovery_manager = vmware_discovery.discovery_manager.VMwareDiscoveryManager

# The name of the staging project (string value) 
# If not set defaults to 'Public'. If set the named project should exist and
# be accessible by the staging_user.
staging_project_name = admin

# The name of the staging user (string value)
# If not set defaults to 'admin'. If set the user should exist and
# have access to the project identified by staging_project_name.
staging_user = admin

# This is a MUST-SET
# The tenant id that network will be imported into.
# default value is admin
tenant_name=admin

# Names of VMware Cluster Compute Resource
cluster_name = cluster1

# Names of VMware ESXi host
# default value is None
# esxi_host=None

# How many MOBs could be got from vcenter in total
# default value is 4000
property_collector_max = 4000

# Target region for discovered templates (for selecting correct glance endpoint)
target_region = RegionOne


[template]
# Allow deletion orphan template in glance which does not exist in vCenter 
# default is False
allow_template_deletion = true

# Allow sync template in vCenter which does not exist in openstack glance
# default is True
allow_template_sync = true

# Template periodic sync interval specified in seconds
# default is 300, minimum is instance_sync_interval
template_sync_interval = 300

# Default name for image for discovered VMware instances,
# default value is 'VMwareUnknownImage'
vmware_default_image_name = "VMwareUnknownImage"

# The prefix that will be added to the name of discovered image templates
# default value is "DiscoveredImage-"
image_prefix = "DiscoveredImage-"

# The maximum number of images to return. The default is 500 images. If your OpenStack
# has more than 500 images, this limit should be increased to include all images.
# default value is 500
list_limit = 500


[portgroup]
# Allow deletion network in neutron which does not exist in vcenter
# default value is False
allow_neutron_deletion = true

# Allow sync network in vCenter which does not exist in openstack neutron
# default value is True
allow_neutron_sync = true

# Portgroup periodic sync interval specified in seconds
# default is 300, minimum is instance_sync_interval
portgroup_sync_interval = 300

# The prefix that will be added to the name of discovered networks
# default value is "DiscoveredNet-"
network_prefix = "DiscoveredNet-"

# Defining port group which you want to import.
# No value means import all port group, default value is []
# port_group_filter_list=

# This is a MUST-SET.
# Define database connection(may be encrypted) to neutron
# example:
# neutron_connection=mysql://neutron:neutron@localhost:3306/neutron
neutron_connection=mysql+pymysql://neutron:teamsun@172.16.142.131/neutron

# This is a MUST-SET
# Defining network discovery scope and have default value is [].
# physical_network_mappings is required when import port group from VCenter side.
# Note: one "physnet" map one "vswitch".
# If you try to map "physnet" with multiple "vswitch"s, the last "vswitch" will take effect.
# Format is <physnet>:<vswitch>.
# For example: physical_network_mappings=physnet1:vswitch0,physnet2:vswitch1'
#physical_network_mappings=physnet1:vSwitch1,physnet2:dvSwitch
physical_network_mappings=vlan_phy1:br-vlan

default_network_name=VMwareUnknownNetwork
default_vlan_id=4096
default_physical_dev=vmware_physical


[instance]
# Allow deletion orphan instance in openstack which does not exist in vCenter
# default is False
allow_instance_deletion = true

# Allow deletion orphan instance in vCenter which does not exist in openstack 
# default is True
allow_instance_sync = true

# Instance periodic sync interval specified in seconds
# default is 20, minimum 10
instance_sync_interval = 20

# How many instance sync intervals between full instance syncs. Only instances
# known to be out of sync are synced on the interval except after this many
# intervals when all instances are synced.
# default is 30
# full_instance_sync_frequency = 30

# The prefix that will be added to the name of discovered instances
# default value is "DiscoveredVM-"
instance_prefix = "DiscoveredVM-"

# Default name for flavor for discovered VMware instances,
# default value is 'VMwareUnknownFlavor'
vmware_default_flavor_name = "VMwareUnknownFlavor"

# Virtual machines to be ignored by discovery ([vm_name_1, vm_name_2 ...])
# default is []
vm_ignore_list = vCenter6.0


[vmware]
task_poll_interval=5.0
use_linked_clone=True
host_ip=172.30.241.15
host_password=!QAZxsw2
host_username=administrator@vsphere.local
api_retry_count=5
cluster_name=cluster1
maximum_objects=100
insecure=true

[database]
connection=mysql+pymysql://nova:teamsun@172.16.142.131/nova

[oslo_policy]
policy_file=/etc/nova/policy.json

[neutron]
url=http://172.16.142.131:9696
region_name=RegionOne
extension_sync_interval=600
auth_url=http://172.16.142.131:35357/v3
password=teamsun
project_domain_name=Default
project_name=services
timeout=30
user_domain_name=Default
username=neutron
auth_plugin=v3password

[glance]
api_servers=172.16.142.131:9292

